var idb=function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){"use strict";function n(e){return e?Array.isArray(e)?e:[e]:[]}function o(e,r){const t=e.onerror&&e.onerror(r);return void 0===t?r:t}function u(e,r){return e.open(e.db.version+1,e=>{r(e)})}function s(e,r){return e.db.objectStoreNames.contains(r)}function i(e,r,t){return new Promise((n,u)=>{const s=e.db.transaction(r.name,r.mode),i=s.objectStore(r.name);s.oncomplete=()=>{n(r.result)},s.onerror=r=>{u(o(e,r.target.error))},t(i)})}t.r(r),t.d(r,"toArray",(function(){return n})),t.d(r,"hasStore",(function(){return s})),t.d(r,"transact",(function(){return i}));class a{constructor(e){this.name=e,this.db=null}open(e,r){return new Promise((t,n)=>{this.db&&this.db.close();const u=indexedDB.open(this.name,e);u.onupgradeneeded=()=>{r&&r(u.result)},u.onerror=()=>{n(o(this,u.error))},u.onsuccess=()=>{this.db=u.result,t(this)}})}async add(e,r){await function(e,r){return new Promise(async t=>{if(e.db.objectStoreNames.contains(r))return t();await u(e,e=>e.createObjectStore(r,{keyPath:"id"})),t()})}(this,e);return i(this,{name:e,mode:"readwrite",result:r},e=>{n(r).forEach(r=>e.add(r))})}async delete(e,r){if(!s(this,e))return Promise.reject(o(this,new Error(`Store "${e}" was not found`)));if(void 0===r)return await u(this,r=>r.deleteObjectStore(e)),Promise.resolve();return i(this,{name:e,mode:"readwrite",result:r},e=>{n(r).forEach(r=>e.delete(r))})}async put(e,r){if(!s(this,e))return Promise.reject(o(this,new Error(`Store "${e}" was not found`)));return i(this,{name:e,mode:"readwrite",result:r},e=>{n(r).forEach(r=>e.put(r))})}async get(e,r){if(!s(this,e))return Promise.reject(o(this,new Error(`Store "${e}" was not found`)));let t={name:e,mode:"readonly",result:null};return i(this,t,e=>{let n;if(r)if(Array.isArray(r)){const o=[...r].sort((e,r)=>e<r?-1:e>r?1:0),u=Math.min(...o),s=Math.max(...o);t.result=[],n=e.openCursor(IDBKeyRange.bound(u,s)),n.onsuccess=()=>{const e=n.result;if(!e)return;t.result[r.indexOf(e.key)]=e.value;const u=o[o.indexOf(e.key)+1];u>-1&&e.continue(u)}}else n=e.get(r),n.onsuccess=function(){t.result=n.result};else n=e.getAll(),n.onsuccess=function(){t.result=n.result}})}}r.default=function(e){return new a(e).open()}}]).default;
//# sourceMappingURL=idb.js.map